# Originally from https://serverfault.com/a/767079
# Run a mount script through systemd on any mmcblk0p* and sd[a-z]* activity

# The service expects to be asynchronous and shouldn't block udev rules
KERNEL=="mmcblk0p[0-9]", ACTION=="add",    RUN+="/bin/systemd-run --no-block --collect /usr/lib/hwsupport/block-device-event.sh add %k"
KERNEL=="mmcblk0p[0-9]", ACTION=="remove", RUN+="/bin/systemd-run --no-block --collect /usr/lib/hwsupport/block-device-event.sh remove %k"
KERNEL=="sd[a-z][0-9]",  ACTION=="add",    RUN+="/bin/systemd-run --no-block --collect /usr/lib/hwsupport/block-device-event.sh add %k"
KERNEL=="sd[a-z][0-9]",  ACTION=="remove", RUN+="/bin/systemd-run --no-block --collect /usr/lib/hwsupport/block-device-event.sh remove %k"
